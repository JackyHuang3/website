+++
title = "工具-支持失败自动重启和断点续传"
[taxonomies]
tags = [ "tools" ]
+++

## 支持失败自动重启和断点续传的命令行文件下载工具

```python
import os
import sys
import time
import signal

Running = True

def run_signal(signum, frame):
    global Running
    Running = False

def pget():
	return os.system(sys.argv[1])

def pget_loop():
	global Running
	while Running:
		if pget() == 0:
			Running = False
			print('pget execute successed......')
		else:
			print('pget execute failed, sleep 1s and try again......')
			time.sleep(1)

# example: python3 ./pget.py "pget https://google.com"
if __name__ == "__main__":
	signal.signal(signal.SIGINT, run_signal)
	pget_loop()
```

## Installation

> - python3

> - pget: [pget](https://github.com/refitor/pget)

## Usage

```shell
python3 ./pget.py "pget https://google.com"
```

